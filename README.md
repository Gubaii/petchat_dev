# 宠聊(PetChat) H5 演示原型

这是一个连接主人与宠物的移动应用高保真原型，通过AI技术和摄像头硬件，实现宠物行为监控和拟人化交流。

## 功能特点

- 实时宠物聊天界面
- 系统消息（预警、日报、周报、月报）
- 详细宠物报告展示
- 宠物监控模拟
- 语音交互功能
- 宠物资料管理

## 技术栈

- HTML5
- Tailwind CSS
- Alpine.js
- Mock.js (虚拟数据)
- Dayjs (日期处理)

## 开始使用

### 安装依赖

```bash
npm install
```

### 开发环境运行

```bash
npm run dev
```

### 构建项目

```bash
npm run build
```

## 目录结构

```
petchat/
├── public/
│   ├── assets/
│   │   ├── images/        # 图片资源
│   │   ├── audio/         # 音频资源
│   │   └── video/         # 视频资源(宠物监控示例)
├── src/
│   ├── components/        # 通用组件
│   ├── styles/            # 样式文件
│   ├── mock/              # 虚拟数据
│   └── main.js            # 主逻辑
├── index.html             # 主页面
├── tailwind.config.js     # Tailwind配置
└── package.json           # 项目依赖
```

## 虚拟数据

项目目前使用虚拟数据进行展示，可以在 `src/mock/data.js` 中进行查看和修改。

## 交互说明

- 系统消息中的报告（日报、周报、月报）可以点击查看详情
- 在输入框右侧可以切换语音模式，长按录音按钮可以进行语音输入
- 点击右上角摄像头图标可以查看宠物监控画面
- 底部导航栏可以在"聊天"和"我的"两个页面间切换
- 在"我的"页面可以编辑宠物资料

## 切换到真实数据

要切换到真实数据，需要修改 `src/mock/data.js` 中的数据获取逻辑，将模拟数据替换为实际API调用。建议:

1. 在 `src/services/` 目录下创建API服务
2. 修改 `main.js` 中的数据加载逻辑
3. 用真实API替换模拟数据

## 注意事项

- 此原型主要为移动设备设计，建议在移动设备或使用浏览器的移动设备模拟模式查看
- 语音功能在原型中仅做了UI交互，未实现实际录音和播放功能
- 监控视频为模拟画面，需要替换为真实监控流

# PetChat 语音合成服务

本项目使用火山引擎的语音合成API来为宠物聊天应用提供真实的语音合成功能。

## 功能特点

- 使用火山引擎的语音合成API生成不同角色的语音
- 支持多种宠物类型的不同音色
- 自动缓存已生成的语音，避免重复请求
- 自动更新语音消息的时长信息

## 启动服务

1. 首先，配置火山引擎API信息

   打开`server/tts_http_service.js`文件，更新以下配置：

   ```js
   const VOLC_CONFIG = {
     appid: 'xxx',  // 替换为你的 appid
     token: 'xxx',  // 替换为你的 token
     cluster: 'xxx'  // 替换为你的 cluster
   };
   ```

2. 安装服务器依赖

   ```bash
   cd server
   npm install
   ```

3. 启动TTS服务器

   ```bash
   cd server
   npm start
   ```

   服务器将在 http://localhost:3001 上运行

4. 配置前端

   前端默认已经配置为连接本地TTS服务。如果需要修改服务地址，请在`src/utils/ttsService.js`中更新`TTS_SERVER_URL`变量。

5. 启动前端开发服务器

   ```bash
   npm run dev
   ```

## 宠物语音配置

不同类型的宠物使用不同的语音风格：

- 仓鼠：可爱童声
- 猫咪：温柔女声 
- 狗狗：诙谐男声
- 荷兰猪：萝莉女声
- 主人：稳重男声

## 注意事项

- 首次播放语音时，会调用API生成真实语音，可能会有短暂延迟
- 同一段文本只会处理一次，后续直接使用缓存的音频文件
- 火山引擎API需要企业认证用户才能使用，请确保已完成认证 